webpackJsonp([20],{127:function(t,e,i){var s=i(62)(i(274),i(505),null,null,null);t.exports=s.exports},209:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{offset:{type:Number,default:50},enableInfinite:{type:Boolean,default:!0},enableRefresh:{type:Boolean,default:!0},dataList:{default:!1,required:!1},onRefresh:{type:Function,default:void 0,required:!1},onInfinite:{type:Function,default:void 0,require:!1}},data:function(){return{top:0,state:0,startX:0,startY:0,touching:!1,infiniteLoading:!1,downFlag:!1}},methods:{touchStart:function(t){this.startY=t.targetTouches[0].pageY,this.startX=t.targetTouches[0].pageX,this.startScroll=this.$el.scrollTop||0,this.touching=!0,this.dataList.noFlag=!1,this.$el.querySelector(".load-more").style.display="block"},touchMove:function(t){if(this.enableRefresh&&!this.dataList.noFlag&&this.touching){var e=t.targetTouches[0].pageY-this.startY-this.startScroll;if(e>0&&t.preventDefault(),this.top=Math.pow(e,.8)+(2===this.state?this.offset:0),2!==this.state&&(this.top>=this.offset?this.state=1:this.state=0,this.enableInfinite)){var i=this.$el.querySelector(".load-more");this.top||0!==this.state?i.style.display="none":i.style.display="block"}}},touchEnd:function(t){if(this.enableRefresh){if(this.touching=!1,2===this.state)return this.state=2,void(this.top=this.offset);this.top>=this.offset?this.refresh():(this.state=0,this.top=0);var e=t.changedTouches[0].pageX,i=t.changedTouches[0].pageY,s=this.startY-i,a=e-this.startX;if(Math.abs(a)<2&&Math.abs(s)<2)return void console.log("滑动距离太短");if(this.enableInfinite&&!this.infiniteLoading){var n=this.$el.clientHeight,o=this.$el.querySelector(".inner").clientHeight,r=this.$el.scrollTop,l=this.onRefresh?this.$el.querySelector(".pull-refresh").clientHeight:0,c=o-n-r-l;console.log(c+" __ "+this.offset),c<=this.offset&&0===this.state?(this.downFlag=!0,this.infinite()):(this.$el.querySelector(".load-more").style.display="none",this.downFlag=!1)}}},refresh:function(){var t=this;this.state=2,this.top=this.offset,setTimeout(function(){t.onRefresh(t.refreshDone)},1e3)},refreshDone:function(){this.state=0,this.top=0},infinite:function(){var t=this;this.infiniteLoading=!0,setTimeout(function(){t.onInfinite(t.infiniteDone)},1e3)},infiniteDone:function(t){this.infiniteLoading=!1,this.downFlag=!1}}}},210:function(t,e,i){e=t.exports=i(120)(!1),e.i(i(211),""),e.push([t.i,"",""])},211:function(t,e,i){e=t.exports=i(120)(!1),e.push([t.i,'.yo-scroll{position:fixed;top:0;right:0;bottom:0;left:0;overflow:auto;z-index:100;height:auto;-webkit-overflow-scrolling:touch}.inner{width:100%;height:auto;transition-duration:.3s}.pull-refresh{position:relative;left:0;top:0;width:100%;display:flex;display:-webkit-flex}.load-more,.pull-refresh{height:.9rem;align-items:center;justify-content:center}.load-more{line-height:.9rem;display:flex;text-align:center;display:none}.nullData{color:#999;height:1rem;line-height:.8rem;text-align:center}.down-tip,.refresh-tip,.up-tip{display:none}.refresh-tip:before,.up-tip:before{content:"";display:inline-block;width:1.6rem;height:.7rem;background-size:70%!important;position:absolute;top:0;left:20%}.yo-scroll.touch .inner{transition-duration:0}.yo-scroll.down .down-tip,.yo-scroll.refresh .refresh-tip,.yo-scroll.up .up-tip{display:block}',""])},212:function(t,e,i){var s=i(210);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i(121)("0602a22c",s,!0,{})},213:function(t,e,i){function s(t){i(212)}var a=i(62)(i(209),i(214),s,"data-v-01fa7463",null);t.exports=a.exports},214:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"yo-scroll",class:{down:0===t.state,up:1==t.state,refresh:2===t.state,touch:t.touching},on:{touchstart:function(e){t.touchStart(e)},touchmove:function(e){t.touchMove(e)},touchend:function(e){t.touchEnd(e)}}},[i("section",{staticClass:"inner",style:{transform:"translate3d(0, "+t.top+"px, 0)"}},[i("header",{staticClass:"pull-refresh"},[t._t("pull-refresh",[i("span",{staticClass:"down-tip"},[t._v("下拉更新")]),t._v(" "),i("span",{staticClass:"up-tip"},[t._v("松开刷新数据")]),t._v(" "),i("span",{staticClass:"refresh-tip"},[t._v("加载中……")])])],2),t._v(" "),t._t("default"),t._v(" "),i("footer",{staticClass:"load-more"},[t._t("load-more",[i("span",{directives:[{name:"show",rawName:"v-show",value:!1===t.downFlag,expression:"downFlag === false"}]},[t._v("上拉加载更多")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!0===t.downFlag,expression:"downFlag === true"}]},[t._v("加载中……")])])],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.dataList.noFlag,expression:"dataList.noFlag"}],staticClass:"nullData"},[t._v("暂无更多数据")])],2)])},staticRenderFns:[]}},274:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"browseactivity",data:function(){return{page_num:1,page_size:5,pageStart:1,pageEnd:0,scrollData:{noFlag:!1},activity_list:[]}},components:{"v-scroll":i(213)},created:function(){localStorage.getItem("user_id"+this.$util.projectOnlyName)||(location.href=window.location.href.split("#")[0]+"#/login?redirect="+this.$route.fullPath);var t={page_num:this.page_num,page_size:this.page_size};this.getList(t)},methods:{getList:function(t){var e=this;e.Invok("88109",t,function(i){if(0!=i.code)return e.$weui.alert(i.msg),!1;t.page_num===e.pageStart?(e.activity_list.splice(0,e.activity_list.length),e.activity_list=e.activity_list.concat(i.success.activity_list)):e.activity_list=e.activity_list.concat(i.success.activity_list),e.pageEnd=i.success.pageCount-0||1,e.page_num=i.success.currentPageIndex-0||1})},onRefresh:function(t){var e={page_num:this.pageStart,page_size:this.page_size};this.getList(e),t()},onInfinite:function(t){var e=this.$el.querySelector(".load-more");if(this.page_num==this.pageEnd)e.style.display="none",this.scrollData.noFlag=!0;else{var i=this.page_num,s={page_num:i+1,page_size:this.page_size};this.getList(s),e.style.display="none"}t()}}}},505:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"browseactivity"}},[i("div",{staticClass:"head"},[i("router-link",{staticClass:"head-jt",attrs:{to:{path:"mycenter",query:this.$route.query}}}),t._v(" "),i("div",{staticClass:"head-text"},[t._v("我的活动")])],1),t._v(" "),i("div",{staticClass:"center index-center"},[i("v-scroll",{attrs:{"on-refresh":t.onRefresh,"on-infinite":t.onInfinite,dataList:t.scrollData}},t._l(t.activity_list,function(e,s){return i("div",{key:e.activity_id,staticClass:"inndex-czhd "},[i("div",{staticClass:"weui-flex-index inndex-czhd-fe chj_cell"},[i("div",{staticClass:"weui-flex__item"},[i("img",{staticClass:"inndex-czhd-logo",attrs:{src:e.pic_url||""}})]),t._v(" "),i("div",{staticClass:"weui-flex__item"},[i("div",{staticClass:"browseactivity-ridiv"},[i("div",{staticClass:"clearfix index-czhf-letop"},[i("img",{staticClass:"left index-czhf-leftlogo",attrs:{src:e.logo_url}}),t._v(" "),i("div",{staticClass:"left"},[t._v(t._s(e.brand_name||""))])]),t._v(" "),i("div",{staticClass:"inndex-czhd-title index-wz-br"},[t._v(t._s(e.title))]),t._v(" "),i("div",{staticClass:"inndex-czhd-sub_title index-wz-br"},[t._v(t._s(e.sub_title))]),t._v(" "),"S"==e.act_type?i("div",[t._v("经销商："+t._s(e.station_name))]):t._e(),t._v(" "),i("div",{staticClass:"index-wz-br"},[t._v("活动地点："+t._s(e.address))]),t._v(" "),i("div",{staticClass:"inndex-czhd-botton "},["S"==e.act_type?i("router-link",{attrs:{to:{path:"cxactivityxx",query:{activity_id:e.activity_id,brand_id:e.brand_id||""}}}},[t._v("查看详情")]):t._e(),t._v(" "),"CAR"==e.act_type?i("router-link",{attrs:{to:{path:"czactivityxx",query:{activity_id:e.activity_id,brand_id:e.brand_id||""}}}},[t._v("查看详情")]):t._e()],1)])])])])}))],1)])},staticRenderFns:[]}}});