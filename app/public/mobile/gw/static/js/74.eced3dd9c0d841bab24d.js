webpackJsonp([74],{142:function(e,t,i){var s=i(62)(i(289),i(441),null,null,null);e.exports=s.exports},289:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"login",data:function(){return{phone:"",ver_code:"",getcdetext:"获取验证码",is_getcode:!1,bot:""}},created:function(){if(this.open_id=localStorage.getItem("open_id"+this.$util.projectOnlyName)||"",""==this.open_id)if(this.open_id=this.$route.query.open_id||"",""==this.open_id){var e=window.location.href;-1===e.indexOf("?")&&(e+="?v=1"),location.href=this.$util.serviceUrl+"/wechat/userAuth.do?redirectUri="+encodeURIComponent(e)}else localStorage.setItem("open_id"+this.$util.projectOnlyName,this.open_id)},methods:{login:function(){if("click"===this.bot)return!1;var e=new this.$util.Validator;e.add(this.phone,[{strategy:"isEmpty",msg:"手机号码不能为空"}]),e.add(this.phone,[{strategy:"isPhone",msg:"手机号码不正确"}]),e.add(this.ver_code,[{strategy:"isEmpty",msg:"验证码不能为空"}]);var t=e.start();if(t)return this.$weui.topTips(t,3e3),!1;var i=this.$route.query.redirect||"123";this.redirect=-1!=i.indexOf("salexc")?"1":"0";var s={phone:this.phone,ver_code:this.ver_code,open_id:localStorage.getItem("open_id"+this.$util.projectOnlyName),to_device_id:sessionStorage.getItem("to_device_id"+this.$util.projectOnlyName)||"",to_user_id:sessionStorage.getItem("to_user_id"+this.$util.projectOnlyName)||"",plate_ind:"C",jump_ind:this.redirect},o=this;o.bot="click",this.Invok("88001",s,function(e){if(o.bot="",0!=e.code)return o.$weui.alert(e.msg),!1;var t=e.success;if(localStorage.setItem("user_id"+o.$util.projectOnlyName,t.user_id),localStorage.setItem("session_id"+o.$util.projectOnlyName,e.msg.session_id),localStorage.setItem("phone"+o.$util.projectOnlyName,t.phone),o.set_shop(),1==o.redirect&&"Y"==t.is_new)o.$router.push({path:"/index"});else if(o.$route.query.redirect){var i=o.$util.deepCopy(o.$route.query);delete i.redirect,o.$router.push({path:o.$route.query.redirect,query:i})}else o.$router.push({path:"/mycenter"})})},getcode:function(){if(this.is_getcode)return!1;if(this.$util.isEmpty(this.phone))return this.$weui.topTips("手机号码不能为空",3e3),!1;if(!this.$util.isPhone(this.phone))return this.$weui.topTips("手机号码不正确",3e3),!1;this.is_getcode=!0;var e=this,t=60;e.getcdetext=t+"s";var i=setInterval(function(){t-=1,e.getcdetext=t+"s",0==t&&(clearInterval(i),e.getcdetext="重新发送",e.is_getcode=!1)},1e3),s={user_phone:this.phone,msg_type:"C"};this.Invok("3007",s,function(t){if(0!=t.code)return e.$weui.alert(t.msg),clearInterval(i),e.getcdetext="重新发送",e.is_getcode=!1,!1})},set_shop:function(){var e=this;e.$http.create({baseURL:e.$util.shopLogin+"?user_id="+(localStorage.getItem("user_id"+this.$util.projectOnlyName)||""),timeout:3e4})({method:"get",headers:{"Content-Type":"application/xxxx-form"}}).then(function(t){t.data?t.data:e.$weui.alert("获取微信接口调用参数错误,请刷新或重新进入页面!")},function(t){e.$weui.alert(t)})}}}},441:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"login"}},[i("div",{staticClass:"login_all"},[e._m(0),e._v(" "),i("div",[i("div",{staticClass:"weui-cell"},[e._m(1),e._v(" "),i("div",{staticClass:"weui-cell__bd"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"weui-input",attrs:{type:"tel",placeholder:"请填写手机号"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})])]),e._v(" "),i("div",{staticClass:"weui-cell"},[e._m(2),e._v(" "),i("div",{staticClass:"weui-cell__bd"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.ver_code,expression:"ver_code"}],staticClass:"weui-input",attrs:{type:"tel",placeholder:"请填写验证码"},domProps:{value:e.ver_code},on:{input:function(t){t.target.composing||(e.ver_code=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"weui-cell__ft"},[i("a",{staticClass:"ologin-btn",class:{click:e.is_getcode},on:{click:e.getcode,contextmenu:function(t){t.preventDefault(),e.show()}}},[e._v(e._s(e.getcdetext))])])]),e._v(" "),i("div",{staticClass:"weui-cell",staticStyle:{"background-color":"#eafafa"}}),e._v(" "),i("div",{staticClass:"center-padding"},[i("div",{staticClass:"login-botton",class:e.bot,on:{click:e.login}},[e._v("登录")])])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"logo"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"weui-cell__hd"},[i("label",{staticClass:"login-label"},[e._v("手机号")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"weui-cell__hd"},[i("label",{staticClass:"login-label"},[e._v("验证码")])])}]}}});